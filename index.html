<!DOCTYPE html><html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>PonturiPariuriLive</title><style>
body {
  background: #121212;
  color: #e0e0e0;
  font-family: 'Segoe UI', sans-serif;
  text-align: center;
  padding: 20px;
}
h1 { font-size: 26px; color: #00e676; }
input, button, select, textarea {
  margin: 8px;
  padding: 12px;
  width: 85%;
  max-width: 340px;
  border-radius: 12px;
  border: none;
  background: #1f1f1f;
  color: #fff;
}
button {
  background-color: #00e676;
  color: #000;
  font-weight: bold;
  cursor: pointer;
}
button:hover { background-color: #00c853; transform: scale(1.05); }
.section { background:#1e1e1e; margin:12px auto; padding:16px; border-radius:16px; max-width:500px; text-align:left; }
.section img { max-width:100%; border-radius:12px; margin-top:10px; }
.category-title { cursor:pointer; padding:12px; margin:10px auto; max-width:500px; font-weight:bold; color:#fff; border-radius:12px; }
#Live { background:#ff0000; }
#Azi { background:#ffff00; color:#000; }
#Cota2 { background:#0000ff; }
.toggle-section { max-height:0; overflow:hidden; transition:max-height 0.5s ease; }
.toggle-section.show { max-height:2000px; }
</style><script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script><script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script><script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script></head>
<body><h1>PonturiPariuriLive âš½</h1>
<h2>â€Doar pasiunea ne mai uneÈ™teâ€</h2><div id="loginDiv">
  <input type="email" id="email" placeholder="Email"><br>
  <input type="password" id="password" placeholder="ParolÄƒ"><br>
  <button onclick="loginWithEmail()">ğŸ”‘ Login</button><br>
</div><p id="status"></p><div id="adminPanel" style="display:none;">
<h3>Bun venit, Admin!</h3>
<button onclick="logout()">ğŸšª Logout</button>
<div>
<h4>ğŸ“¤ CreeazÄƒ o postare</h4>
<input type="text" id="postTitle" placeholder="Titlu postare"><br>
<textarea id="postContent" placeholder="ConÈ›inut postare" rows="3"></textarea><br>
<select id="postCategory">
<option value="Live">Ponturi Live</option>
<option value="Azi">Ponturi Azi</option>
<option value="Cota2">Cota 2</option>
</select><br>
<input type="file" id="postImage"><br>
<button onclick="publishPost()">âœ… PublicÄƒ</button>
</div>
</div><div id="loader">ğŸ”„ Se Ã®ncarcÄƒ postÄƒrile...</div>
<div id="postsContainer" style="margin-top:30px;"></div><script>
// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyDD71nL2jWbHZ4WphA2BVImANcJf-qjqzg",
  authDomain: "ponturipariurilive-f2373.firebaseapp.com",
  projectId: "ponturipariurilive-f2373",
  storageBucket: "ponturipariurilive-f2373.firebasestorage.app",
  messagingSenderId: "963352935724",
  appId: "1:963352935724:web:75e36c8125c7868bb68089"
};
firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.firestore();
const ADMIN_UID = "xBIXqXaLyoM4qfKQi7E3JR3Nzol1";

const loginDiv = document.getElementById('loginDiv');
const adminPanel = document.getElementById('adminPanel');
const statusMsg = document.getElementById('status');
const postsContainer = document.getElementById('postsContainer');
const loader = document.getElementById('loader');

function loginWithEmail(){
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;
  auth.signInWithEmailAndPassword(email,password)
      .then(u => checkAdmin(u.user))
      .catch(() => { statusMsg.innerText = "âš ï¸ Email sau parolÄƒ greÈ™itÄƒ!"; });
}

function checkAdmin(user){
  if(user.uid === ADMIN_UID){
    statusMsg.innerText = "âœ… Logare reuÈ™itÄƒ!";
    loginDiv.style.display='none';
    adminPanel.style.display='block';
  } else {
    statusMsg.innerText = "â›” Nu eÈ™ti admin!";
    auth.signOut();
  }
}

function logout(){
  auth.signOut().then(()=>{
    statusMsg.innerText="Te-ai delogat!";
    loginDiv.style.display='block';
    adminPanel.style.display='none';
  });
}

auth.onAuthStateChanged(user => {
  if(user && user.uid === ADMIN_UID){
    loginDiv.style.display='none';
    adminPanel.style.display='block';
    statusMsg.innerText='âœ… Bine ai revenit!';
  } else {
    loginDiv.style.display='block';
    adminPanel.style.display='none';
  }
});

const imgbbApiKey='58e3090d49428c99848c563a5a332fcc';
async function uploadToImgbb(file){
  const fd = new FormData();
  fd.append('image', file);
  const res = await fetch(`https://api.imgbb.com/1/upload?key=${imgbbApiKey}`,{method:'POST',body:fd});
  const data = await res.json();
  return data.data.url;
}

async function publishPost(){
  const t = document.getElementById('postTitle').value;
  const c = document.getElementById('postContent').value;
  const cat = document.getElementById('postCategory').value;
  const file = document.getElementById('postImage').files[0];
  if(!t || !c){ alert('CompleteazÄƒ titlul È™i conÈ›inutul!'); return; }
  let imgURL='';
  if(file && file.type.startsWith('image/')){ imgURL = await uploadToImgbb(file); } 
  else if(file){ alert('FiÈ™ierul nu este imagine!'); return; }
  
  await db.collection('posts').add({
    title:t, content:c, category:cat, imageURL:imgURL,
    createdAt: firebase.firestore.FieldValue.serverTimestamp()
  });
  document.getElementById('postTitle').value='';
  document.getElementById('postContent').value='';
  document.getElementById('postImage').value='';
}

// Load posts public for everyone
function loadPosts(){
  loader.style.display='block';
  db.collection('posts').orderBy('createdAt','desc').onSnapshot(snap=>{
    const cats={Live:[],Azi:[],Cota2:[]};
    snap.forEach(doc=>{
      const p=doc.data();
      const t = p.createdAt ? p.createdAt.toDate().toLocaleString() : 'Necunoscut';
      const html=`<div class="section">
        <h3>${p.title}</h3>
        <p>${p.content}</p>
        <small>ğŸ“… ${t}</small><br>
        ${p.imageURL ? `<img src="${p.imageURL}">` : ''}<br>
        <button onclick="likePost('${doc.id}')">Like (${p.likes||0})</button>
        <button onclick="commentPost('${doc.id}')">Comment (${(p.comments||[]).length})</button>
        <button onclick="sharePost('${doc.id}')">Share (${p.shares||0})</button>
        ${auth.currentUser && auth.currentUser.uid === ADMIN_UID ? `<button onclick="deletePost('${doc.id}')">ğŸ—‘ï¸ È˜terge</button>` : ''}
      </div>`;
      cats[p.category]?.push(html);
    });
    
    postsContainer.innerHTML =
      `<div class="category-title" id="Live" onclick="toggleCategory('liveSection')">ğŸ“º Ponturi Live</div>
      <div id="liveSection" class="toggle-section">${cats.Live.join('')||'<p>Nicio postare.</p>'}</div>
      <div class="category-title" id="Azi" onclick="toggleCategory('aziSection')">ğŸ“… Ponturi Azi</div>
      <div id="aziSection" class="toggle-section">${cats.Azi.join('')||'<p>Nicio postare.</p>'}</div>
      <div class="category-title" id="Cota2" onclick="toggleCategory('cota2Section')">ğŸ¯ Cota 2</div>
      <div id="cota2Section" class="toggle-section">${cats.Cota2.join('')||'<p>Nicio postare.</p>'}</div>`;
    
    loader.style.display='none';
  });
}

function toggleCategory(id){ document.getElementById(id).classList.toggle('show'); }
function likePost(id){ db.collection('posts').doc(id).update({likes: firebase.firestore.FieldValue.increment(1)}); }
function commentPost(id){ const c = prompt('Comentariu anonim:'); if(c){ db.collection('posts').doc(id).update({comments: firebase.firestore.FieldValue.arrayUnion(c)}); } }
function sharePost(id){ alert('Distribuie acest link pe reÈ›ele sociale: '+window.location.href); db.collection('posts').doc(id).update({shares: firebase.firestore.FieldValue.increment(1)}); }
function deletePost(id){ if(confirm('È˜tergi aceastÄƒ postare?')){ db.collection('posts').doc(id).delete(); } }

loadPosts();
</script></body>
</html>